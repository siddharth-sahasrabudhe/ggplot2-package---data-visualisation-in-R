---
title: "Faceting the plot with ggplot2"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

### What is faceting? 

Faceting is data visualization technique, that 
partitions the plot into a matrix of panels.Each panel shows a different
subset of the data. 

The subset of data is generated by dividing the main
data set by some descrete or categorical variable. By creating multiple
panels out of main data, Analyst can rapidly compare the patterns in
different parts of data and see whether they are same or different.



### Load the library

```{r,warning=FALSE,message=FALSE}

library(tidyverse)
library(gapminder)

```

### Load the data-set

```{r,warning=FALSE,message=FALSE,results='hide'}
head(gapminder)
```

### create line chart for gdpPercap Vs year

```{r,warning=FALSE,message=FALSE}

gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line()
 
  

```

### Create sub-plots (facets) for line chart

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_grid(country~.)


```

### Arrange the sub-plots vertically

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_grid(.~country)

```

### Arrange the plots in matrix form

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_grid(continent~country)

```

### Use `facet_wrap()` function

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_wrap(continent~country)

```

### changing the scaling of the sub-plots

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_wrap(continent~country,scales = "free_y")
```

### changing facet layout using col and row argument

```{r}
gapminder %>%
  filter(country=="India"|country=="Germany"|country=="Japan"|
           country=="United States"|country=="Australia")%>%
  ggplot(aes(x=year,y=gdpPercap,color=country))+
  geom_line(color="blue")+
  facet_wrap(continent~country,scales = "free_y",nrow=3)

```

### Summary: -

-   Faceting generates sub-plots each showing a different subset of the
    data

-   There are two types of faceting: `facet_wrap()` and `facet_grid()`

-   `facet_grid()`produces 2d grid of panels, and uses all combinations
    between two categorical variables to create a sub-plots. Thus, if
    the data for some combinations is not available, it leads to empty
    sub-plot.

-   `facet_wrap()` produces 1d chart but wraps it in 2d. Since it is
    essentially 1d chart, there are no empty sub-plots created using
    `facet_wrap()` function.

-   The x-axis or y-axis scales can be changed using `scales` argument.

-   we can get more control on the facet layout using `facet_wrap()`
    function by passing `ncol` and `nrow` arguments.
